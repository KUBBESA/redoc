# OpenAPI v3.0
openapi: 3.0.1
servers:
  - url: https://api.kubbesa.net/staging
    description: Servidor staging
    x-displayName: staging
  # - url: https://api.kubbesa.net/dev
  #   description: Servidor Dev
  # - url: https://api.kubbesa.net/staging
  #   description: Servidor Staging

info:
  description: |
    # Introducción
    Este API esta docoumentado en formato **OpenAPI** desarrollado por el equipo de desarrollo de [Crediviva](https://crediviva.com.pa).
    Para esta documentación, puedes utilizar el api key `special-key` para probar los filtros de autorización.

    # Información de Autenticación 

    Crediviva ofrece la siguiente forma de autenticación:
      - API Key

    <!-- ReDoc-Inject: <security-definitions> -->

  version: 1.0.0
  title: Crediviva
  contact:
    name: Soporte de API
    email: dev@crediviva.com.pa
    url: https://crediviva.com.pa
  x-logo:
    url: "https://i0.wp.com/crediviva.com.pa/wp-content/uploads/2022/03/Logo_300dpi.png?w=3600&ssl=1"
    altText: Crediviva logo
tags:
  - name: Autenticación
    x-displayName: Autenticación
    description: Obtiene la información de los tokens asociados al usuario.
  - name: Solicitudes de Crédito
    x-displayName: Solicitudes de Crédito
    description: Accede a las solicitudes de crédito asociadas a tu comercio.
  - name: Créditos
    x-displayName: Créditos
    description: Accede a los créditos asociadas a tu comercio.
  - name: Departamentos
    x-displayName: Departamentos
    description: Operaciones sobre Departamentos para usuarios
  - name: Roles
    x-displayName: Roles
    description: Operaciones sobre roles para usuarios
  - name: Usuarios
    x-displayName: Usuarios
    description: Operaciones sobre usuarios
  - name: API CAJA
    x-displayName: Api Caja
    description: Operaciones en caja comercio
  - name: API PUNTO PAGO
    x-displayName: Api Punto Pago
    description: Operaciones en caja comercio
  - name: Desembolsos
    x-displayName: Desembolsos
    description: Operaciones sobre desembolsos
  - name: credit_application_model
    x-displayName: Solicitud de Crédito
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />
  - name: credit_model
    x-displayName: Crédito
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />
  - name: client_model
    x-displayName: Cliente
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />
  - name: department_model
    x-displayName: Departamento
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />
  - name: role_model
    x-displayName: Rol
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />
  - name: users_model
    x-displayName: Usuario
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Credit_Application" />

x-tagGroups:
  - name: Autenticación
    tags:
      - Autenticación
  - name: Créditos
    tags:
      # - Solicitudes de Crédito
      # - Créditos
      # - Clientes
      - Desembolsos
  - name: API CAJA
    tags:
      - API CAJA
  - name: API PUNTO PAGO
    tags:
      - API PUNTO PAGO
  - name: API PULL
    tags:
      - API PULL
  - name: RED DIGITAL
    tags:
      - RED DIGITAL
  - name: Integración e-Commerce
    tags:
      - e-Commerce

security:
  - {}
paths:
  /api-caja/get-balance:
    post:
      tags:
        - API CAJA
      summary: Obtener saldo del cliente
      description: Obtiene el saldo asociado al cliente
      operationId: get-balance
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Get_Balance"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/GetBalance"
                  - $ref: "#/components/schemas/GetBalanceAlreadyPaid"
        "400":
          description: No se ha proporcionado el número de cédula en la solicitud
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetBalanceNoIdNumber"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetBalanceForbidden"
        "500":
          description: Error al conectarse a base de datos
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetBalanceErrorConnectingDb"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/GetBalanceUserNotFound"
                  - $ref: "#/components/schemas/GetBalanceCreditNotFound"
                  - $ref: "#/components/schemas/GetBalanceInstallmentsNotFound"
  /api-caja/get-payment-methods:
    get:
      tags:
        - API CAJA
      summary: Obtener métodos de pago disponibles
      description: Obtiene la lista de métodos de pago disponibles
      operationId: get-payment-methods
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPaymentMethods"
        "500":
          description: Error al obtener los metodos de pago
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPaymentMethodsError"
  /api-caja/make-payment:
    post:
      tags:
        - API CAJA
      summary: Realizar un pago
      description: Procesa un pago asociado al cliente
      operationId: make-payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Make_Payment"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MakePayment"

        "400":
          description: No se ha proporcionado los parametros correspondientes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MakePaymentNoParameters"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MakePaymentForbidden"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/MakePaymentUserNotFound"
                  - $ref: "#/components/schemas/MakePaymentCreditNotFound"
        "500":
          description: Error al realizar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/MakePaymentErroConnectingDb"
                  - $ref: "#/components/schemas/MakePaymentErroGettingReceipt"
                  - $ref: "#/components/schemas/MakePaymentErroSendingEmail"
                  - $ref: "#/components/schemas/MakePaymentErroMakingPayment"
                  - $ref: "#/components/schemas/MakePaymentErroGettingTransaction"
        "422":
          description: Error al procesar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/MakePaymentErroTransactionAmount"
  /integrations/payment/make-payment/get-balance:
    post:
      tags:
        - API PUNTO PAGO
      summary: Obtener saldo del cliente
      description: Obtiene el saldo asociado al cliente
      operationId: get-balance
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Get_Balance_Punto_Pago"
      security:
        - api_key:
            - ""
      responses:
        "200":
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/GetBalancePuntoPago"
                  - $ref: "#/components/schemas/GetBalanceAlreadyPaidPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceNoIdNumberPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceForbiddenPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceErrorConnectingDbPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceUserNotFoundPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceCreditNotFoundPuntoPago"
                  - $ref: "#/components/schemas/GetBalanceInstallmentsNotFoundPuntoPago"

        # "400":
        #   description: No se ha proporcionado el número de cédula en la solicitud
        #   content:
        #     application/json:
        #       schema:
        #         $ref: "#/components/schemas/GetBalanceNoIdNumber"
        # "403":
        #   description: Sin permisos para acceder al recurso
        #   content:
        #     application/json:
        #       schema:
        #         $ref: "#/components/schemas/GetBalanceForbidden"
        # "500":
        #   description: Error al conectarse a base de datos
        #   content:
        #     application/json:
        #       schema:
        #         $ref: "#/components/schemas/GetBalanceErrorConnectingDb"
        # "404":
        #   description: Recurso no encontrado
        #   content:
        #     application/json:
        #       schema:
        #         oneOf:
        #           - $ref: "#/components/schemas/GetBalanceUserNotFound"
        #           - $ref: "#/components/schemas/GetBalanceCreditNotFound"
        #           - $ref: "#/components/schemas/GetBalanceInstallmentsNotFound"
  /pull/create-qr:
    post:
      tags:
        - API PULL
      summary: Generar código QR
      description: Genera el código qr que será escaneado por el cliente
      operationId: create-qr-code
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Create_Qr_Code"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCode"
        "400":
          description: La solicitud no puede ser procesada debido a uno o más errores en los parámetros enviados.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/CreateQrCodeNoParameters"
                  - $ref: "#/components/schemas/CreateQrCodeWrongType"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeForbidden"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeCommerceNotFound"
        "500":
          description: Error al realizar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/CreateQrCodeErrorConnectingDb"
                  - $ref: "#/components/schemas/CreateQrCodeErrorCreatingQR"
        "422":
          description: Error al procesar la solicitud
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeErrorTransactionAmount"
  /pull/get-info-qr:
    post:
      tags:
        - API PULL
      summary: Obtener información código QR
      description: Obtiene la información del estado del QR y desembolso
      operationId: get-info-qr
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Get_Info_Qr"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetInfoQr"
        "400":
          description: No se ha proporcionado los parametros correspondientes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetInfoQrNoParameters"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetInfoQrForbidden"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetInfoQrDisbursementNotFound"
        "500":
          description: Error al realizar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/GetInfoQrErrorConnectingDb"
                  - $ref: "#/components/schemas/GetInfoQrErrorGettingQR"
  /pull/cancel-qr:
    post:
      tags:
        - API PULL
      summary: Cancelar código QR
      description: Cancela el código QR generado
      operationId: cancel-qr-pull
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Cancel_Qr"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelQr"
        "400":
          description: No se ha proporcionado los parametros correspondientes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelQrNoParameters"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelQrForbidden"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelQrNotFound"
        "500":
          description: Error al realizar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/CancelQrErrorConnectingDb"
                  - $ref: "#/components/schemas/CancelQrErrorCancellingQR"
  /red-digital/create-qr:
    post:
      tags:
        - RED DIGITAL
      summary: Generar código QR
      description: Genera el código qr que será escaneado por el cliente
      operationId: red-digital-create-qr-code
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Create_Qr_Code_Red_Digital"
      security:
        - api_key:
            - ""
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeRedDigital"
        "400":
          description: No se ha proporcionado los parametros correspondientes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeNoParametersRedDigital"
        "403":
          description: Sin permisos para acceder al recurso
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeForbiddenRedDigital"
        "404":
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeCommerceNotFoundRedDigital"
        "500":
          description: Error al realizar la solicitud
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/CreateQrCodeErrorConnectingDbRedDigital"
                  - $ref: "#/components/schemas/CreateQrCodeErrorCreatingQRRedDigital"
        "422":
          description: Error al procesar la solicitud
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateQrCodeErrorTransactionAmountRedDigital"
  /auth:
    get:
      tags:
        - Autenticación
      summary: Tokens de autenticacīón
      description: Retorna los tokens asociados al usaurio para acceder a los recursos del API
      operationId: auth
      parameters:
        - name: Authorization
          in: header
          description: Basic base64-encoded string de username:password
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Auth"
        "400":
          description: Sin autenticación
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/AuthNoHeader"
                  - $ref: "#/components/schemas/AuthRefreshInvalid"
  /auth/refresh:
    get:
      tags:
        - Autenticación
      summary: Refrescar Tokens de autenticacīón
      description: Retorna los nuevos tokens asociados al usaurio para acceder a los recursos del API
      operationId: authRefresh
      parameters:
        - name: Authorization
          in: header
          description: Basic base64-encoded string del refreshToken
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Auth"
        "400":
          description: Sin autenticación
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/AuthNoHeader"
                  - $ref: "#/components/schemas/AuthInvalid"
  /creditapplications:
    get:
      tags:
        - Solicitudes de Crédito
      summary: Listar solicitudes de crédito
      description: Retorna la lista de solicitudes de crédito asociados al comercio.
      operationId: getCreditApplications
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Credit_Application"
        "401":
          description: Sin autenticación
        "403":
          description: Sin autorización
        "500":
          description: Error de Servidor
      security:
        - api_key:
            - "leer: solicitudes de crédito"
  "/creditapplications/{id}":
    get:
      tags:
        - Solicitudes de Crédito
      summary: Buscar solicitud de crédito por Id
      description: "Retorna la solicitud de crédito por el Id suministrado."
      operationId: getCreditApplicationById
      parameters:
        - name: Autorización
          in: header
          description: Token de autorización
          required: true
          schema:
            type: string
        - name: id
          in: path
          description: id de la solicitud de crédito
          required: true
          schema:
            type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
            application/xml:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Id suministrado inválido
        "401":
          description: No authenticado
        "403":
          description: No autorizado
        "404":
          description: Usuario no encontrado
      security:
        - api_key:
            - "leer: solicitudes de crédito"
  /qr:
    post:
      tags:
        - Desembolsos
      summary: Consumir código QR
      description: "Este recurso valida que el código QR sea válido aspectos como la fecha de expiración del código QR y perteneciente al comercio."
      operationId: scanQr
      requestBody:
        $ref: "#/components/requestBodies/qr"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/qrResponse"
        "400":
          description: Código QR no sumunistrado
        "401":
          description: Sin autenticación
        "403":
          description: Sin autorización
        "409":
          description: Código QR Inválido
        "500":
          description: Error de Servidor
      security:
        - api_key:
            - "leer: desembolso"
            - "escribir: desembolso"
  /qr/cancel:
    post:
      operationId: cancel-qr
      tags:
        - Desembolsos
      summary: Cancelar código QR
      description: "Este recurso cancela un código QR perteneciente al comercio previo a su estado activo."
      requestBody:
        $ref: "#/components/requestBodies/qrCancel"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/qrCancelResponse"
        "400":
          description: Código QR no sumunistrado
        "401":
          description: Sin autenticación
        "403":
          description: Sin autorización
        "404":
          description: Código QR no encontrado
        "500":
          description: Error de Servidor
      security:
        - api_key:
            - "escritura: cancelar desembolso"
  /qr/status:
    get:
      tags:
        - Desembolsos
      summary: Status Código QR
      description: "Este recurso devuelve el status de un código QR."
      operationId: QrStatus
      parameters:
        - name: dataQR
          in: query
          description: Código QR consumido
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/qrStatusResponse"
        "400":
          description: Código QR no suministrado
        "401":
          description: Sin autenticación
        "403":
          description: Sin autorización
        "500":
          description: Error de Servidor
      security:
        - api_key:
            - "leer: desembolso"
            - "escribir: desembolso"
  /invoice:
    post:
      tags:
        - Desembolsos
      summary: Enviar factura
      description: "Este recurso acepta una factura por parte del comercio"
      operationId: invoice
      requestBody:
        $ref: "#/components/requestBodies/invoice"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceResponse"
        "401":
          description: Sin autenticación
        "403":
          description: Sin autorización
        "500":
          description: Error de Servidor
      security:
        - api_key:
            - "leer: desembolso"
            - "escribir: desembolso"
  /integrations/e-commerce/orders:
    post:
      tags:
        - e-Commerce
      summary: Crear orden
      description: "Este recurso crea una orden."
      operationId: e-commerce-orders-create
      requestBody:
        $ref: "#/components/requestBodies/eCommerceOrdersCreateOrder"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersCreateResponse"
        "400":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersCreateResponse400"
        "401":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse401"
        "403":
          description: Sin autorización
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse403"
        "500":
          description: Error de Servidor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse500"
      security:
        - API-Key:
            - "Escritura: Crear una orden"
  /integrations/e-commerce/orders/cancel:
    post:
      tags:
        - e-Commerce
      summary: Cancelar orden
      description: "Este recurso cancela una orden."
      operationId: e-commerce-orders-cancel
      requestBody:
        $ref: "#/components/requestBodies/eCommerceOrdersCancel"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersCancelResponse"
        "400":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersCancelResponse400"
        "401":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse401"
        "403":
          description: Sin autorización
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse403"
        "404":
          description: Orden no encontrada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse404"
        "500":
          description: Error de Servidor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse500"
      security:
        - API-Key:
            - "Escritura: Cancelar una orden"
  /integrations/e-commerce/orders/status:
    post:
      tags:
        - e-Commerce
      summary: Estado de la orden
      description: "Este recurso retorna el estado de una orden."
      operationId: e-commerce-orders-status
      requestBody:
        $ref: "#/components/requestBodies/eCommerceOrdersStatus"
      responses:
        "200":
          description: Operación exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersStatusResponse"
        "400":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersStatusResponse400"
        "401":
          description: Sin autenticación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse401"
        "403":
          description: Sin autorización
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse403"
        "404":
          description: Transacción no encontrada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse404"
        "500":
          description: Error de Servidor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/eCommerceOrdersResponse500"
      security:
        - API-Key:
            - "Lectura: Ver Estado de una orden"
components:
  schemas:
    qrResponse:
      type: object
      properties:
        dataQR:
          description: Código QR / Pin
          type: number
          example: 123456
        transactionId:
          description: ID único de transacción
          type: string
          example: 64cb0b3030b6e6d24b613553
        status:
          enum:
            - OK
            - EXPIRED
            - CANCELLED
            - CREDIT_NOT_FOUND
            - INSUFICIENT_CREDIT
            - INVALID_AMOUNT
            - INVALID_QR
        message:
          type: string
          example: "Message example"
    qrCancelResponse:
      type: object
      properties:
        dataQR:
          description: Código QR / Pin
          type: number
          example: 123456
        transactionId:
          description: ID único de transacción
          type: string
          example: 64cb0b3030b6e6d24b613553
        status:
          type: string
          example: "CANCELLED"
    qrStatusResponse:
      type: object
      properties:
        dataQR:
          description: Código QR / Pin
          type: number
          example: 123456
        transactionId:
          description: ID único de transacción
          type: string
          example: 64cb0b3030b6e6d24b613553
        status:
          enum:
            - ACTIVE
            - APPROVED
            - CANCELLED
            - EXPIRED
            - PENDING
    InvoiceResponse:
      type: object
      properties:
        dataQR:
          type: number
        message:
          type: string
    Id:
      type: string
      readOnly: true
    Auth:
      type: object
      properties:
        idToken:
          type: string
          description: Token Bearer de autenticación para utilizar en los endpoints que requieran de autenticación. Expira cada hora
        refreshtToken:
          type: string
          description: Utilizado en el endpoint /auth/refresh para obtener un idToken renovado
    GetBalance:
      type: object
      properties:
        loanId:
          type: number
          description: Identificador único del crédito
        installmentNumber:
          type: number
          description: Plazo correspondiente a la cuota
        monthlyInstallment:
          type: number
          description: Monto inicial de la cuota
        amountPaid:
          type: number
          description: Monto pagado hasta el momento de la cuota
        remainingAmount:
          type: number
          description: Deuda pendiente de la cuota
        totalDebt:
          type: number
          description: Deuda total acumulada
        dueDate:
          type: string
          description: Fecha en la que la cuota vence
    GetBalancePuntoPago:
      type: object
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 200      
        loanId:
          type: number
          description: Identificador único del crédito
        installmentNumber:
          type: number
          description: Plazo correspondiente a la cuota
        monthlyInstallment:
          type: number
          description: Monto inicial de la cuota
        amountPaid:
          type: number
          description: Monto pagado hasta el momento de la cuota
        remainingAmount:
          type: number
          description: Deuda pendiente de la cuota
        totalDebt:
          type: number
          description: Deuda total acumulada
        dueDate:
          type: string
          description: Fecha en la que la cuota vence
    GetBalanceAlreadyPaid:
      type: object
      properties:
        message:
          type: string
          example: "Credit fully paid"
    GetBalanceAlreadyPaidPuntoPago:
      type: object
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 200      
        message:
          type: string
          example: "Credit fully paid"
    GetBalanceNoIdNumber:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "IdNumber is missing"
    GetBalanceNoIdNumberPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 400
        message:
          type: string
          example: "IdNumber is missing"
    GetBalanceForbidden:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    GetBalanceForbiddenPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 403
        message:
          type: string
          example: "Forbidden"
    GetBalanceErrorConnectingDb:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    GetBalanceErrorConnectingDbPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 500
        message:
          type: string
          example: "Error when connecting db"
    GetBalanceUserNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "User not found"
    GetBalanceUserNotFoundPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 404
        message:
          type: string
          example: "User not found"
    GetBalanceCreditNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Credit not found"
    GetBalanceCreditNotFoundPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 404
        message:
          type: string
          example: "Credit not found"
    GetBalanceInstallmentsNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Installments not found"
    GetBalanceInstallmentsNotFoundPuntoPago:
      type: object
      description: Sin Header
      properties:
        statusCode:
          type: number
          description: "Código devuelto por el servicio"
          example: 404
        message:
          type: string
          example: "Installments not found"
    GetPaymentMethods:
      description: Sin Header
      properties:
        paymentMethods:
          type: string
          description: método de pago
    GetPaymentMethodsError:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error getting payment methods"
    MakePayment:
      type: object
      description: Sin Header
      properties:
        payment_date:
          type: string
          example: "12/28/2023, 9:47:58 a. m."
          description: "Fecha y hora del pago."
        collection_office:
          type: string
          example: "PANAMA STORE"
          description: "Oficina de cobro asociada al pago."
        customer_name:
          type: string
          example: "Pepito Flores"
          description: "Nombre completo del cliente."
        id_number:
          type: string
          example: "9-229-1200"
          description: "Número de identificación del cliente."
        credit_number:
          type: number
          example: 200231
          description: "Número de crédito asociado al pago."
        transaction_number:
          type: string
          example: "60b7509715a82214"
          description: "Número de transacción del pago."
        payment_method:
          type: string
          example: "RAP"
          description: "Método de pago utilizado."
        cashier_id:
          type: string
          example: "8aa9dc91-f09a-48a4-844b-3178d3610a28"
          description: "Identificación del cajero que procesó el pago."
        total_payment:
          type: string
          example: "$0.10"
          description: "Monto total del pago realizado."
        total_obligation_at_start:
          type: number
          example: 300
          description: Obligación total al inicio del proceso de pago.
        total_obligation_before_payment:
          type: number
          example: 219
          description: "Obligación total antes del pago."
        total_obligation_after_payment:
          type: number
          example: 218.9
          description: "Obligación total después del pago."
        total_obligation_if_pre_cancelled:
          type: number
          example: 218.9
          description: "Obligación total si se cancela antes del pago."
    MakePaymentNoParameters:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Missing parameters: parameters"
    MakePaymentForbidden:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    MakePaymentUserNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "User not found"
    MakePaymentCreditNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Credit not found"
    MakePaymentErroGettingReceipt:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error getting receipt"
    MakePaymentErroSendingEmail:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error sending email"
    MakePaymentErroMakingPayment:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error making payment"
    MakePaymentErroGettingTransaction:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error getting transaction"
    MakePaymentErroConnectingDb:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    MakePaymentErroTransactionAmount:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Transaction amount must be greater than zero"
    CreateQrCode:
      type: object
      description: Sin Header
      properties:
        dataQR:
          type: number
          example: 503212
          description: "Código generado para ser escaneado en el qr"
        credito:
          type: number
          example: 300692
          description: "Identificador del crédito"
    CreateQrCodeNoParameters:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Missing parameters: amount"
    CreateQrCodeWrongType:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Amount must be a number"
    CreateQrCodeForbidden:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    CreateQrCodeCommerceNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Commerce not found"
    CreateQrCodeErrorConnectingDb:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    CreateQrCodeErrorCreatingQR:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error creating QR"
    CreateQrCodeErrorTransactionAmount:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Transaction amount must be greater than zero"
    CreateQrCodeRedDigital:
      type: object
      description: Sin Header
      properties:
        dataQR:
          type: number
          example: "503212"
          description: "Código generado para ser escaneado en el qr"
    CreateQrCodeNoParametersRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Missing parameters: amount"
    CreateQrCodeForbiddenRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    CreateQrCodeCommerceNotFoundRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Commerce not found"
    CreateQrCodeErrorConnectingDbRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    CreateQrCodeErrorCreatingQRRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error creating QR"
    CreateQrCodeErrorTransactionAmountRedDigital:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Transaction amount must be greater than zero"
    GetInfoQr:
      type: object
      description: Respuesta para obtener información de un código QR
      properties:
        dataQR:
          type: number
          example: 503212
          description: Código generado
        transactionId:
          description: ID único de transacción
          type: string
          example: 64cb0b3030b6e6d24b613553
        disbursementStatus:
          type: object
          properties:
            currentStatus:
              enum:
                - PENDING
                - IN_PROGRESS
                - VALIDATING_IDENTITY
                - PENDING_SIGNATURE
                - SIGNATURE_COMPLETED
                - REJECTED
                - CANCELLED
              type: string
              example: "IN_PROGRESS"
              description: Estado actual del QR y desembolso
            description:
              type: string
              example: "Código QR a la espera de escaneo"
              description: Descripción del estado del desembolso
        client:
          type: object
          properties:
            idNumber:
              type: string
              example: "1234567890"
              description: Número de identificación del cliente
            financeDetails:
              type: object
              properties:
                requestedAmount:
                  type: number
                  example: 1000
                  description: Monto solicitado
                availableBalance:
                  type: number
                  example: 500
                  description: Saldo disponible del cliente
                remainingAmount:
                  type: number
                  example: 500
                  description: Monto restante
        additionalInfo:
          type: string
          example: "Comercio con crédito parcial inhabilitado"
          description: Información adicional del desembolso
        createdAt:
          type: string
          example: "2024-02-14T12:00:00Z"
          description: Fecha de creación del desembolso
        updatedAt:
          type: string
          example: "2024-02-14T12:30:00Z"
          description: Fecha de actualización del desembolso
    GetInfoQrNoParameters:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Missing parameters: dataQR"
    GetInfoQrForbidden:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    GetInfoQrDisbursementNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Disbursement not found"
    GetInfoQrErrorConnectingDb:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    GetInfoQrErrorGettingQR:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error creating QR"
    CancelQr:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Código QR cancelado correctamente"
    CancelQrNoParameters:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Missing parameters: dataQR"
    CancelQrForbidden:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Forbidden"
    CancelQrNotFound:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Disbursement not found"
    CancelQrErrorConnectingDb:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error when connecting db"
    CancelQrErrorCancellingQR:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "Error cancelling QR"
    AuthNoHeader:
      type: object
      description: Sin Header
      properties:
        message:
          type: string
          example: "No Auth info provided"
    AuthInvalid:
      type: object
      description: Header inválido
      properties:
        error:
          type: string
          example: "Incorrect username or password."
    AuthRefreshInvalid:
      type: object
      description: Header inválido
      properties:
        error:
          type: string
          example: "Invalid refresh token"
    Get_Balance_Punto_Pago:
      type: object
      required:
        - idNumber
      properties:
        idNumber:
          type: string
          description: "formato X-XXX-XXXX"
    Get_Balance:
      type: object
      required:
        - idNumber
      properties:
        idNumber:
          type: string
          description: "formato X-XXX-XXXX"
    # Get_Payment_Methods:
    #   type: object
    Make_Payment:
      type: object
      required:
        - creditId
        - transactionAmount
        - paymentTypeId
        - paymentMethod
      properties:
        creditId:
          type: number
        transactionAmount:
          type: number
        paymentTypeId:
          type: number
        paymentMethod:
          type: string
    Create_Qr_Code:
      type: object
      required:
        - amount
        - lineas
        - metaData
      properties:
        amount:
          type: number
          description: "Monto de la compra"
        lineas:
          type: array
          items:
            type: string
          description: "Descripción del producto comprado"
          example:
            [
              "CELULARES",
              "COMPUTADORAS",
              "LINEA BLANCA",
              "ELECTRODOMÉSTICOS",
              "INDUMENTARIA",
              "CALZADO",
            ]
        metaData:
          type: object
          example:
            { name: "John", lastName: "Doe", email: "john-doe@gmail.com" }
          description: "Información adicional útil para identificar al usuario que efectúa la transacción. No se limita a los ejemplos proporcionados."
    Create_Qr_Code_Red_Digital:
      type: object
      required:
        - amount
        - lineas
        - metaData
        - commerceId
        - deviceId
      properties:
        amount:
          type: number
          description: "Monto de la compra"
        lineas:
          type: array
          items:
            type: string
          description: "Descripción del producto comprado"
          example:
            [
              "CELULARES",
              "COMPUTADORAS",
              "LINEA BLANCA",
              "ELECTRODOMÉSTICOS",
              "INDUMENTARIA",
              "CALZADO",
            ]
        commerceId:
          type: string
          example: "123456"
          description: "Código del comercio mapeado en el pos"
        deviceId:
          type: string
          example: "2fa24asz212"
          description: "Identificador del pos"
        metaData:
          type: object
          example: '{"name":"John","lastName":"Doe","email":"john-doe@gmail.com"}'
          description: "Información adicional útil para identificar al usuario que efectúa la transacción. No se limita a los ejemplos proporcionados."
    Get_Info_Qr:
      type: object
      required:
        - dataQR
      properties:
        dataQR:
          type: number
          description: "Código del QR generado"
    Cancel_Qr:
      type: object
      required:
        - dataQR
      properties:
        dataQR:
          type: number
          description: "Código del QR generado"
    Credit_Application:
      type: object
      discriminator:
        propertyName: creditApplicationType
      properties:
        id:
          description: Credit_Application ID
          $ref: "#/components/schemas/Id"
        userId:
          description: Documento de identificación del cliente
          type: string
          example:
        status:
          type: string
          description: Credit_Application status in the store
          enum:
            - APPROVADO
            - PENDIENTE
            - RECHAZADO
    Qr:
      type: object
      required:
        - dataQR
        - amount
      properties:
        dataQR:
          type: number
          description: Código QR
          example: "123456"
        amount:
          description: Monto a consumir en el POS
          type: number
          example: 1000
    QrCancel:
      type: object
      required:
        - dataQR
        - transactionId
      properties:
        dataQR:
          type: number
          description: Código QR
          example: 123456
        transactionId:
          type: string
          description: ID único de transacción

    Invoice:
      type: object
      required:
        - dataQR
        - amount
        - orderId
        - file
      properties:
        dataQR:
          type: number
          description: Código QR consumido
          example: 123456
        amount:
          description: Monto total de la factura
          type: number
          example: 1000
        orderId:
          description: Id unico de la orden por parte del comercio
          type: string
          example: "transactionId-0123456789"
        file:
          description: Archivo de factura
          type: string
    User:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Id"
        email:
          description: Correo electrónico del usuario
          type: string
          format: email
          example: dev@crediviva.com.pa
        given_name:
          description: Nombres del usuario
          type: string
          example: Dev
        familly_name:
          description: Apellidos del usuario
          type: string
          example: Crediviva
        status:
          description: Estado del usuario
          type: string
          enum:
            - ACTIVO
            - INACTIVO
    eCommerceOrdersStatus:
      type: object
      required:
        - externalOrderId
      properties:
        externalOrderId:
          type: string
          description: ID único externo de la orden del comercio
          example: "123456-ABCDE"
    eCommerceOrdersStatusResponse:
      type: object
      properties:
        externalOrderId:
          type: string
          example: 123456-ABCDE
        status:
          type: string
          enum:
            - ACTIVE
            - APPROVED
            - CANCELLED
            - EXPIRED
            - IN_PROGRESS
            - REJECTED
    eCommerceOrdersStatusResponse400:
      type: object
      properties:
        message:
          type: string
          example: "Parámetro externalOrderId no suministrado"
    eCommerceOrdersCreate:
      type: object
      required:
        - amount
        - commerceId
        - externalOrderId
        - callbackUrl
        - callbackBody
      properties:
        amount:
          type: number
          description: Monto total de la orden.
          example: 100
        commerceId:
          type: string
          description: ID del comercio.
          example: "123ABC"
        externalOrderId:
          type: string
          description: ID único externo de la orden del comercio
          example: "123456-ABCDE"
        callbackUrl:
          type: string
          description: Callback URL de notificación de eventos
          example: "https://example.com/event"
        callbackBody:
          type: string
          description: Payload para el callback URL
          example: { id: "externalOrderId", event: "success" }
    eCommerceOrdersCreateResponse:
      type: object
      properties:
        commerce:
          type: string
          example: "123ABC"
        externalOrderId:
          type: string
          example: "123456-ABCDE"
        amount:
          type: number
          example: 100
        status:
          type: string
          example: "IN_PROGRESS"
        redirectUrl:
          type: string
          example: "https://client.crediviva.com.pa/integrations/123ABC/orders/123456-ABCDE"
    eCommerceOrdersCreateResponse400:
      type: object
      properties:
        message:
          type: string
          example: "Parámetro externalOrderId no suministrado"
    eCommerceOrdersCancel:
      type: object
      required:
        - commerceId
        - externalOrderId
      properties:
        commerceId:
          type: string
          description: ID del comercio.
          example: "123ABC"
        externalOrderId:
          type: string
          description: ID único externo de la orden del comercio
          example: "123456-ABCDE"
    eCommerceOrdersCancelResponse:
      type: object
      properties:
        commerce:
          type: string
          example: "123ABC"
        externalOrderId:
          type: string
          example: "123456-ABCDE"
        amount:
          type: number
          example: 100
        status:
          type: string
          example: "CANCELLED"
        cancelledBy:
          type: string
          example: "E-COMMERCE"
    eCommerceOrdersCancelResponse400:
      type: object
      properties:
        message:
          type: string
          example: "Parámetro externalOrderId no suministrado"
    eCommerceOrdersResponse401:
      type: object
      properties:
        message:
          type: string
          example: "API-Key no suministrado"
    eCommerceOrdersResponse403:
      type: object
      properties:
        message:
          type: string
          example: "Acceso denegado"
    eCommerceOrdersResponse404:
      type: object
      properties:
        message:
          type: string
          example: "Orden no encontrada"
    eCommerceOrdersResponse500:
      type: object
      properties:
        message:
          type: string
          example: "Error de servidor"
  requestBodies:
    qr:
      content:
        application/json:
          schema:
            description: QR
            title: "Request Body"
            $ref: "#/components/schemas/Qr"
    qrCancel:
      content:
        application/json:
          schema:
            description: QR-cancel
            title: "Request Body"
            $ref: "#/components/schemas/QrCancel"
    eCommerceOrdersCreateOrder:
      content:
        application/json:
          schema:
            description: e-commerce-orders-create
            title: "Request Body"
            $ref: "#/components/schemas/eCommerceOrdersCreate"
    eCommerceOrdersCancel:
      content:
        application/json:
          schema:
            description: e-commerce-orders-cancel
            title: "Request Body"
            $ref: "#/components/schemas/eCommerceOrdersCancel"
    eCommerceOrdersStatus:
      content:
        application/json:
          schema:
            description: e-commerce-orders-status
            title: "Request Body"
            $ref: "#/components/schemas/eCommerceOrdersStatus"
    invoice:
      content:
        application/json:
          schema:
            typedescription: Solicitud de Crédito
            title: "title rb disb"
            $ref: "#/components/schemas/Invoice"
  securitySchemes:
    Bearer:
      type: apiKey
      name: Authorization
      in: header
      description: >-
        Para este ejemplo, puedes utilizar el `special-Key` el cual te concede de la autenticación necesaria para consumir los recursos expuestos para las operaciones descritas en el API.
    api_key:
      description: >
        Para este ejemplo, puedes utilizar el `special-Key` el cual te concede de la autenticación necesaria para consumir los recursos expuestos para las operaciones descritas en el API.
      type: apiKey
      name: Authorization
      in: header
    API-Key:
      description: >
        API-Key suministrado por Crediviva
      type: apiKey
      name: x-api-key
      in: header
